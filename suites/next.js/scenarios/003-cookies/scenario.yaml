id: ZE_nextjs_cookies
suite: next.js
title: "Server Actions with Cookie Management"
description: |
  This evaluation tests the ability to create server actions that handle form submissions and cookie management in Next.js App Router. This combines form handling, server-side processing, and cookie operations.

workspace:
  node: "20.x"
  manager: auto
  managers_allowed: [pnpm]
  workspaces: pnpm

baseline:
  run:
    - cmd: "pnpm install"
    - cmd: "pnpm build"
    - cmd: "pnpm lint"
    - cmd: "pnpm test"

validation:
  commands:
    install: "pnpm install"
    test: "pnpm test"
    lint: "pnpm lint"

oracle:
  answers_file: "./oracle-answers.json"

llm_judge:
  enabled: true
  model: "anthropic/claude-3.5-sonnet"
  temperature: 0.1
  max_tokens: 2000
  categories:
    - "Server Action Implementation (Weight: 30%): Correct 'use server' directive, proper async function, form data handling. Score 1-5: 1=broken server action, 5=perfect implementation"
    - "Cookie Management (Weight: 30%): Correct use of cookies() API from next/headers, proper set/get/delete operations. Score 1-5: 1=incorrect cookie handling, 5=robust cookie operations"
    - "Form Handling & Validation (Weight: 20%): Proper form submission, data validation, error handling. Score 1-5: 1=broken forms, 5=excellent validation"
    - "Code Quality & Security (Weight: 15%): Secure operations, clean code, proper TypeScript types. Score 1-5: 1=insecure/messy, 5=secure and clean"
    - "Overall Implementation (Weight: 5%): Completeness, reliability, Next.js best practices. Score 1-5: 1=non-functional, 5=production-ready"
