id: ZE_nextjs_client_component
suite: next.js
title: "Client Component with State Management"
description: |
  This evaluation tests the ability to create interactive client components in Next.js App Router using React state management. This tests the fundamental distinction between server and client components.

workspace:
  node: "20.x"
  manager: auto
  managers_allowed: [pnpm]
  workspaces: pnpm

baseline:
  run:
    - cmd: "pnpm install"
    - cmd: "pnpm build"
    - cmd: "pnpm lint"
    - cmd: "pnpm test"

validation:
  commands:
    install: "pnpm install"
    test: "pnpm test"
    lint: "pnpm lint"

oracle:
  answers_file: "./oracle-answers.json"

heuristic_checks:
  enabled: true

  # Critical validation commands
  commands:
    - name: "install_succeeds"
      command: "pnpm install"
      weight: 2.0
      description: "Dependencies install successfully"

    - name: "build_succeeds"
      command: "pnpm build"
      weight: 3.0
      description: "Production build completes without errors"

    - name: "lint_passes"
      command: "pnpm lint"
      weight: 1.0
      description: "Code meets linting standards"

  # Check for Client Component patterns
  patterns:
    - name: "has_use_client_directive"
      file: "app/**/*.tsx"
      pattern: "^['\"]use client['\"]"
      weight: 3.0
      description: "Client component has 'use client' directive"

    - name: "uses_state_hook"
      file: "app/**/*.tsx"
      pattern: "useState|const \\[.*,.*set.*\\]\\s*=\\s*useState"
      weight: 2.0
      description: "Uses useState for state management"

    - name: "has_event_handlers"
      file: "app/**/*.tsx"
      pattern: "onClick|onChange|onSubmit|on[A-Z]\\w+"
      weight: 1.5
      description: "Event handlers implemented for interactivity"

    - name: "has_effect_hook"
      file: "app/**/*.tsx"
      pattern: "useEffect"
      weight: 1.0
      description: "Uses useEffect for side effects (optional)"

    - name: "imports_react_hooks"
      file: "app/**/*.tsx"
      pattern: "import.*\\{.*useState.*\\}.*from.*['\"]react['\"]"
      weight: 1.5
      description: "Imports React hooks properly"

    - name: "has_typescript_types"
      file: "app/**/*.tsx"
      pattern: "interface|type\\s+\\w+.*="
      weight: 0.5
      description: "TypeScript types defined"

llm_judge:
  enabled: true
  model: "anthropic/claude-3.5-sonnet"
  temperature: 0.1
  max_tokens: 2000
  categories:
    - "Client Component Correctness (Weight: 35%): Proper 'use client' directive, correct use of useState/useEffect hooks. Score 1-5: 1=missing directive or broken, 5=perfect client component"
    - "State Management Implementation (Weight: 30%): Clean state handling, proper event handlers, reactive updates. Score 1-5: 1=broken state logic, 5=robust state management"
    - "Interactivity & UX (Weight: 20%): Smooth user interactions, proper form handling, responsive behavior. Score 1-5: 1=non-functional, 5=excellent UX"
    - "Code Quality & Structure (Weight: 10%): Clean code, proper TypeScript types, component organization. Score 1-5: 1=messy, 5=well-structured"
    - "Overall Implementation (Weight: 5%): Completeness, reliability, following React/Next.js patterns. Score 1-5: 1=broken, 5=production-ready"
